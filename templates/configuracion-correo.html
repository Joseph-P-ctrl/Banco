<!DOCTYPE html>
<html>
<head>
    <title>Configuración Correo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
<header>
    <img src="{{ url_for('static', filename='images/logos.jpeg') }}" alt="Imagen" width="150" height="80">
</header>
<nav class="bg-body-tertiary">
    <ul class="nav nav-pills justify-content-center mb-3">
        <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="/basedatos">Base de Datos</a></li>
        <li class="nav-item"><a class="nav-link" href="/asiento">Asientos</a></li>
        <li class="nav-item"><a class="nav-link" href="/correos">Correos</a></li>
        <li class="nav-item"><a class="nav-link active" href="/configuracion-correo">Config Correo</a></li>
    </ul>
</nav>

<div class="container" style="max-width: 700px;">
    <h2 class="text-center mb-4">Configuración de Correo (Cifrada)</h2>

    {% if mensaje %}
    <div class="alert alert-info" role="alert">
        {{ mensaje }}
    </div>
    {% endif %}

    {% if credenciales_configuradas %}
    <div class="alert alert-success" role="alert">
        Ya existen credenciales guardadas de forma cifrada.
    </div>
    {% else %}
    <div class="alert alert-warning" role="alert">
        No hay credenciales cifradas registradas todavía.
    </div>
    {% endif %}

    <form method="POST" action="/configuracion-correo" class="card p-4">
        <div class="mb-3">
            <label for="sender" class="form-label">Usuario/Correo remitente</label>
            <input type="email" class="form-control" id="sender" name="sender" value="{{ sender or '' }}" required>
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">Clave</label>
            <div class="input-group">
                <input type="password" class="form-control" id="password" name="password" required>
                <button class="btn btn-outline-secondary" type="button" id="toggle-password" onclick="togglePassword()">Ver</button>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Guardar cifrado</button>
    </form>
</div>

<script>
function togglePassword() {
    const passwordInput = document.getElementById('password');
    const toggleButton = document.getElementById('toggle-password');
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleButton.textContent = 'Ocultar';
    } else {
        passwordInput.type = 'password';
        toggleButton.textContent = 'Ver';
    }
}
</script>
</body>
</html>
